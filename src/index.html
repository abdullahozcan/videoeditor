<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data: blob:;">
    <title>Electron AI Subtitler</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      }

      h1 {
        color: #333;
        margin-bottom: 10px;
        font-size: 28px;
      }

      .subtitle {
        color: #666;
        margin-bottom: 30px;
        font-size: 14px;
      }

      .section {
        margin-bottom: 25px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 8px;
      }

      .section h3 {
        color: #444;
        margin-bottom: 15px;
        font-size: 18px;
      }

      button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        transition: all 0.3s ease;
        margin-right: 10px;
        margin-bottom: 10px;
      }

      button:hover:not(:disabled) {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      button.secondary {
        background: #6c757d;
      }

      button.success {
        background: #28a745;
      }

      .file-info {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 15px;
        padding: 12px;
        background: white;
        border-radius: 6px;
        border: 2px solid #e0e0e0;
      }

      .file-path {
        color: #555;
        font-size: 13px;
        flex: 1;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      textarea {
        width: 100%;
        min-height: 250px;
        padding: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
        resize: vertical;
        margin-top: 10px;
        transition: border-color 0.3s ease;
      }

      textarea:focus {
        outline: none;
        border-color: #667eea;
      }

      textarea:read-only {
        background: #f5f5f5;
      }

      video {
        max-width: 100%;
        border-radius: 8px;
        margin-top: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      }

      .progress-container {
        margin-top: 15px;
        display: none;
      }

      .progress-container.active {
        display: block;
      }

      .progress-bar {
        width: 100%;
        height: 30px;
        background: #e0e0e0;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 12px;
        font-weight: 600;
      }

      .status-text {
        margin-top: 8px;
        color: #555;
        font-size: 13px;
        font-style: italic;
      }

      .button-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .edit-controls {
        margin-top: 10px;
        display: none;
      }

      .edit-controls.active {
        display: flex;
        gap: 10px;
      }

      .hidden {
        display: none !important;
      }

      /* Timeline Styles */
      .timeline-container {
        margin-top: 20px;
        padding: 20px;
        background: white;
        border-radius: 8px;
        border: 2px solid #e0e0e0;
      }

      .timeline-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        align-items: center;
      }

      .time-display {
        font-family: 'Courier New', monospace;
        font-size: 14px;
        font-weight: 600;
        color: #333;
        padding: 8px 12px;
        background: #f0f0f0;
        border-radius: 4px;
      }

      .timeline-wrapper {
        position: relative;
        height: 80px;
        background: #2a2a2a;
        border-radius: 6px;
        overflow: hidden;
        cursor: pointer;
      }

      .timeline-track {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 100%;
        background: linear-gradient(to bottom, #3a3a3a 0%, #2a2a2a 100%);
      }

      .timeline-segment {
        position: absolute;
        top: 0;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        opacity: 0.7;
        border: 2px solid #fff;
        box-sizing: border-box;
      }

      .timeline-handle {
        position: absolute;
        top: 0;
        width: 12px;
        height: 100%;
        background: #fff;
        cursor: ew-resize;
        z-index: 10;
        box-shadow: 0 0 8px rgba(0,0,0,0.5);
      }

      .timeline-handle:hover {
        background: #667eea;
      }

      .timeline-handle.start {
        left: -6px;
        border-radius: 6px 0 0 6px;
      }

      .timeline-handle.end {
        right: -6px;
        border-radius: 0 6px 6px 0;
      }

      .timeline-playhead {
        position: absolute;
        top: 0;
        width: 3px;
        height: 100%;
        background: #ff4444;
        z-index: 5;
        pointer-events: none;
      }

      .timeline-playhead::before {
        content: '';
        position: absolute;
        top: -6px;
        left: -5px;
        width: 0;
        height: 0;
        border-left: 6px solid transparent;
        border-right: 6px solid transparent;
        border-top: 8px solid #ff4444;
      }

      .timeline-markers {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        font-size: 11px;
        color: #888;
        font-family: 'Courier New', monospace;
      }

      .trim-info {
        display: flex;
        gap: 20px;
        margin-top: 15px;
        padding: 12px;
        background: #f8f9fa;
        border-radius: 6px;
        font-size: 13px;
      }

      .trim-info span {
        font-weight: 600;
        color: #555;
      }

      .playback-controls {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .playback-btn {
        width: 40px;
        height: 40px;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      }

      /* Audio and Video Settings */
      .settings-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 20px;
      }

      .setting-group {
        padding: 15px;
        background: white;
        border-radius: 8px;
        border: 2px solid #e0e0e0;
      }

      .setting-group h4 {
        margin: 0 0 12px 0;
        color: #444;
        font-size: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .volume-control {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-top: 8px;
      }

      .volume-slider {
        flex: 1;
        height: 6px;
        -webkit-appearance: none;
        appearance: none;
        background: #e0e0e0;
        border-radius: 3px;
        outline: none;
      }

      .volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      }

      .volume-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: pointer;
        border-radius: 50%;
        border: none;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      }

      .volume-value {
        min-width: 50px;
        text-align: right;
        font-weight: 600;
        color: #555;
        font-family: 'Courier New', monospace;
      }

      .aspect-ratios {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
        margin-top: 8px;
      }

      .aspect-btn {
        padding: 10px;
        background: white;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 13px;
        font-weight: 600;
        color: #555;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
      }

      .aspect-btn:hover {
        border-color: #667eea;
        background: #f8f9ff;
      }

      .aspect-btn.active {
        border-color: #667eea;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .aspect-icon {
        font-size: 20px;
      }

      .aspect-label {
        font-size: 11px;
        opacity: 0.8;
      }

      .audio-waveform {
        height: 40px;
        background: #2a2a2a;
        border-radius: 4px;
        margin-top: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #888;
        font-size: 12px;
        position: relative;
        overflow: hidden;
      }

      .waveform-bar {
        position: absolute;
        bottom: 0;
        width: 2px;
        background: linear-gradient(to top, #667eea, #764ba2);
        opacity: 0.7;
      }

      /* Video aspect ratio overlay */
      .video-container {
        position: relative;
        display: inline-block;
        margin-top: 15px;
        max-width: 100%;
        transition: all 0.3s ease;
      }

      /* Sticky video player */
      .video-container.sticky {
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 320px;
        max-width: 320px;
        z-index: 1000;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        border-radius: 8px;
        overflow: hidden;
      }

      .video-container.sticky video {
        width: 100%;
        height: auto;
        border-radius: 8px;
      }

      .video-container.sticky .aspect-overlay {
        display: none !important;
      }

      .sticky-close {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1001;
        font-size: 16px;
        transition: all 0.2s;
      }

      .video-container.sticky .sticky-close {
        display: flex;
      }

      .sticky-close:hover {
        background: rgba(255, 0, 0, 0.8);
        transform: scale(1.1);
      }

      .aspect-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        display: none;
      }

      .aspect-overlay.active {
        display: block;
      }

      .aspect-frame {
        position: absolute;
        border: 3px solid #667eea;
        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);
        box-sizing: border-box;
      }

      .aspect-label {
        position: absolute;
        top: 10px;
        right: 10px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      }

      /* Timeline waveform */
      .timeline-waveform {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 30px;
        display: flex;
        align-items: flex-end;
        gap: 1px;
        padding: 0 2px;
        opacity: 0.6;
        pointer-events: none;
        z-index: 1;
      }

      .waveform-sample {
        flex: 1;
        background: linear-gradient(to top, #667eea, #764ba2);
        min-width: 1px;
        transition: height 0.1s ease;
      }

      /* Split markers */
      .split-marker {
        position: absolute;
        top: 0;
        width: 3px;
        height: 100%;
        background: #ff4444;
        z-index: 15;
        pointer-events: none;
        box-shadow: 0 0 5px rgba(255, 68, 68, 0.8);
      }

      .split-marker::before {
        content: 'âœ‚ï¸';
        position: absolute;
        top: -20px;
        left: -8px;
        font-size: 16px;
        filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
      }

      .split-marker::after {
        content: '';
        position: absolute;
        top: -8px;
        left: -2px;
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-top: 8px solid #ff4444;
      }

      /* Timeline thumbnail preview */
      .timeline-thumbnail {
        position: fixed;
        display: none;
        pointer-events: none;
        z-index: 1000;
        border: 2px solid #667eea;
        border-radius: 8px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        background: #1a1a1a;
        overflow: hidden;
      }

      .timeline-thumbnail.active {
        display: block;
      }

      .thumbnail-canvas {
        display: block;
        width: 160px;
        height: 90px;
        background: #000;
      }

      .thumbnail-time {
        padding: 6px 10px;
        background: rgba(0, 0, 0, 0.9);
        color: #fff;
        text-align: center;
        font-family: 'Courier New', monospace;
        font-size: 12px;
        font-weight: 600;
      }

      /* Batch Queue Styles */
      .queue-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px;
        margin-bottom: 8px;
        background: white;
        border: 2px solid #ddd;
        border-radius: 6px;
        transition: all 0.3s;
      }

      .queue-item.processing {
        border-color: #667eea;
        background: #f0f4ff;
      }

      .queue-item.completed {
        border-color: #4caf50;
        background: #f1f8f4;
      }

      .queue-item.error {
        border-color: #f44336;
        background: #fff5f5;
      }

      .queue-item-info {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .queue-item-name {
        font-weight: 600;
        color: #333;
        font-size: 14px;
      }

      .queue-item-status {
        font-size: 12px;
        color: #666;
        font-style: italic;
      }

      .queue-item-remove {
        padding: 6px 12px;
        background: #f44336;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        transition: background 0.3s;
      }

      .queue-item-remove:hover {
        background: #d32f2f;
      }

      .queue-item-progress {
        width: 100%;
        height: 4px;
        background: #e0e0e0;
        border-radius: 2px;
        overflow: hidden;
        margin-top: 4px;
      }

      .queue-item-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s;
      }

      /* Advanced Subtitle Editor Styles */
      .subtitle-item {
        background: white;
        border: 2px solid #ddd;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 12px;
        transition: all 0.3s;
      }

      .subtitle-item:hover {
        border-color: #667eea;
        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
      }

      .subtitle-item.active {
        border-color: #667eea;
        background: #f0f4ff;
      }

      .subtitle-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .subtitle-index {
        font-weight: 700;
        color: #667eea;
        font-size: 16px;
      }

      .subtitle-actions {
        display: flex;
        gap: 6px;
      }

      .subtitle-time-controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-bottom: 10px;
      }

      .time-input-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }

      .time-input-label {
        font-size: 12px;
        font-weight: 600;
        color: #666;
      }

      .time-input-wrapper {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .time-input {
        flex: 1;
        padding: 6px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
      }

      .time-adjust-btn {
        padding: 4px 8px;
        border: 1px solid #ddd;
        background: white;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.2s;
      }

      .time-adjust-btn:hover {
        background: #f0f0f0;
        border-color: #667eea;
      }

      .subtitle-text-input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        font-family: inherit;
        resize: vertical;
        min-height: 60px;
      }

      .subtitle-text-input:focus {
        outline: none;
        border-color: #667eea;
      }

      .icon-btn {
        padding: 6px 10px;
        border: none;
        background: transparent;
        cursor: pointer;
        font-size: 16px;
        border-radius: 4px;
        transition: all 0.2s;
      }

      .icon-btn:hover {
        background: #f0f0f0;
      }

      .icon-btn.delete:hover {
        background: #ffebee;
        color: #f44336;
      }

      .icon-btn.play:hover {
        background: #e3f2fd;
        color: #2196f3;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¬ AI Video Editor & Subtitler</h1>
      <p class="subtitle">AI-powered video editing, subtitle generation and burn-in tool</p>

      <!-- Video Selection -->
      <div class="section">
        <h3>1. Select Video</h3>
        
        <!-- Batch Mode Toggle -->
        <div style="margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
            <input type="checkbox" id="batchModeToggle" style="width: 18px; height: 18px; cursor: pointer;">
            <span style="font-weight: 600; color: #333;">ğŸ“š Batch Mode (Process Multiple Videos)</span>
          </label>
        </div>

        <button id="selectBtn">ğŸ“ Select Video File</button>
        <button id="selectMultipleBtn" class="secondary hidden">ğŸ“‚ Select Multiple Videos</button>
        
        <!-- Single Video Info -->
        <div id="fileInfo" class="file-info hidden">
          <span>ğŸ“¹</span>
          <span class="file-path" id="videoPath">No file selected</span>
        </div>
        
        <!-- Batch Queue List -->
        <div id="batchQueue" class="hidden" style="margin-top: 15px;">
          <h4 style="margin-bottom: 10px;">ğŸ“‹ Video Queue (<span id="queueCount">0</span> files)</h4>
          <div id="queueList" style="
            max-height: 300px;
            overflow-y: auto;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
          "></div>
          <div style="margin-top: 10px; display: flex; gap: 10px;">
            <button id="clearQueueBtn" class="secondary">ğŸ—‘ï¸ Clear Queue</button>
            <button id="processBatchBtn" class="success" disabled>âš¡ Process All Videos</button>
          </div>
        </div>
        
        <div class="video-container" id="videoContainer">
          <button class="sticky-close" id="stickyCloseBtn" title="Exit sticky mode">âœ•</button>
          <video id="preview" controls class="hidden"></video>
          <div id="aspectOverlay" class="aspect-overlay">
            <div id="aspectFrame" class="aspect-frame"></div>
            <div id="aspectLabel" class="aspect-label">Original</div>
          </div>
        </div>
      </div>

      <!-- Video Editing Timeline -->
      <div id="videoEditSection" class="section hidden">
        <h3>2. Edit Video (Optional)</h3>
        
        <div class="playback-controls">
          <button id="playPauseBtn" class="playback-btn secondary">â–¶ï¸</button>
          <button id="skipBackBtn" class="playback-btn secondary">âª</button>
          <button id="skipForwardBtn" class="playback-btn secondary">â©</button>
          <button id="splitBtn" class="secondary">âœ‚ï¸ Split at Current Time</button>
          <button id="resetTrimBtn" class="secondary">ğŸ”„ Reset Trim</button>
        </div>

        <div class="timeline-container">
          <div class="timeline-controls">
            <div class="time-display">
              <span id="currentTimeDisplay">00:00.00</span> / <span id="durationDisplay">00:00.00</span>
            </div>
          </div>

          <div class="timeline-wrapper" id="timelineWrapper">
            <div class="timeline-track" id="timelineTrack"></div>
            <div class="timeline-waveform" id="timelineWaveform"></div>
            <div id="splitMarkers"></div>
            <div class="timeline-segment" id="timelineSegment">
              <div class="timeline-handle start" id="handleStart"></div>
              <div class="timeline-handle end" id="handleEnd"></div>
            </div>
            <div class="timeline-playhead" id="playhead"></div>
          </div>

          <div class="timeline-markers">
            <span id="marker0">0:00</span>
            <span id="marker25"></span>
            <span id="marker50"></span>
            <span id="marker75"></span>
            <span id="marker100"></span>
          </div>

          <div class="trim-info">
            <div>ğŸ¬ <span>Start:</span> <span id="trimStartDisplay">0:00.00</span></div>
            <div>ğŸï¸ <span>End:</span> <span id="trimEndDisplay">0:00.00</span></div>
            <div>â±ï¸ <span>Duration:</span> <span id="trimDurationDisplay">0:00.00</span></div>
          </div>
        </div>

        <!-- Audio and Video Settings -->
        <div class="settings-grid">
          <!-- Audio Settings -->
          <div class="setting-group">
            <h4>ğŸ”Š Audio Settings</h4>
            <div class="volume-control">
              <span>ğŸ”‰</span>
              <input type="range" id="volumeSlider" class="volume-slider" min="0" max="200" value="100" step="5">
              <span>ğŸ”Š</span>
              <span class="volume-value" id="volumeValue">100%</span>
            </div>
            <div class="audio-waveform" id="audioWaveform">
              <span>Audio Waveform</span>
            </div>
          </div>

          <!-- Aspect Ratio Settings -->
          <div class="setting-group">
            <h4>ğŸ“ Aspect Ratio (Video Size)</h4>
            <div class="aspect-ratios">
              <button class="aspect-btn active" data-ratio="original">
                <span class="aspect-icon">ğŸ“±</span>
                <span>Original</span>
                <span class="aspect-label">Keep size</span>
              </button>
              <button class="aspect-btn" data-ratio="9:16">
                <span class="aspect-icon">ğŸ“±</span>
                <span>9:16</span>
                <span class="aspect-label">Phone Portrait</span>
              </button>
              <button class="aspect-btn" data-ratio="16:9">
                <span class="aspect-icon">ğŸ–¥ï¸</span>
                <span>16:9</span>
                <span class="aspect-label">Landscape/YouTube</span>
              </button>
              <button class="aspect-btn" data-ratio="1:1">
                <span class="aspect-icon">â¬›</span>
                <span>1:1</span>
                <span class="aspect-label">Square/Instagram</span>
              </button>
              <button class="aspect-btn" data-ratio="4:5">
                <span class="aspect-icon">ğŸ“±</span>
                <span>4:5</span>
                <span class="aspect-label">Instagram Portrait</span>
              </button>
              <button class="aspect-btn" data-ratio="4:3">
                <span class="aspect-icon">ğŸ–¥ï¸</span>
                <span>4:3</span>
                <span class="aspect-label">Classic TV</span>
              </button>
            </div>
          </div>

          <!-- Video Filters -->
          <div class="setting-group">
            <h4>ğŸ¨ Video Filters</h4>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div>
                <label for="brightnessSlider" style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                  <span>â˜€ï¸ Brightness:</span>
                  <span id="brightnessValue">0</span>
                </label>
                <input type="range" id="brightnessSlider" min="-0.3" max="0.3" step="0.01" value="0" 
                  style="width: 100%;">
              </div>
              <div>
                <label for="contrastSlider" style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                  <span>â— Contrast:</span>
                  <span id="contrastValue">1.0</span>
                </label>
                <input type="range" id="contrastSlider" min="0.5" max="2.0" step="0.05" value="1.0" 
                  style="width: 100%;">
              </div>
              <div>
                <label for="saturationSlider" style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                  <span>ğŸŒˆ Saturation:</span>
                  <span id="saturationValue">1.0</span>
                </label>
                <input type="range" id="saturationSlider" min="0" max="2.0" step="0.05" value="1.0" 
                  style="width: 100%;">
              </div>
            </div>
          </div>

          <!-- Speed Control -->
          <div class="setting-group">
            <h4>âš¡ Speed Control</h4>
            <div>
              <label for="speedSlider" style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                <span>Speed:</span>
                <span id="speedValue">1.0x</span>
              </label>
              <input type="range" id="speedSlider" min="0.25" max="4.0" step="0.05" value="1.0" 
                style="width: 100%;">
              <div style="display: flex; justify-content: space-between; font-size: 11px; color: #666; margin-top: 2px;">
                <span>0.25x (Slow)</span>
                <span>1x (Normal)</span>
                <span>4x (Fast)</span>
              </div>
            </div>
          </div>

          <!-- Rotation and Flip -->
          <div class="setting-group">
            <h4>ğŸ”„ Rotation & Flip</h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
              <button class="aspect-btn" id="rotate90Btn" style="padding: 8px;">
                <span>â†» 90Â°</span>
              </button>
              <button class="aspect-btn" id="rotate180Btn" style="padding: 8px;">
                <span>â†» 180Â°</span>
              </button>
              <button class="aspect-btn" id="rotate270Btn" style="padding: 8px;">
                <span>â†» 270Â°</span>
              </button>
              <button class="aspect-btn" id="resetRotationBtn" style="padding: 8px;">
                <span>â†º Reset</span>
              </button>
              <button class="aspect-btn" id="flipHorizontalBtn" style="padding: 8px;">
                <span>â†”ï¸ Flip H</span>
              </button>
              <button class="aspect-btn" id="flipVerticalBtn" style="padding: 8px;">
                <span>â†•ï¸ Flip V</span>
              </button>
            </div>
          </div>

          <!-- Audio Fade Effects -->
          <div class="setting-group">
            <h4>ğŸµ Audio Fade Effects</h4>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div>
                <label for="fadeInDuration" style="display: block; margin-bottom: 4px;">
                  <span>ğŸ“ˆ Fade In (seconds):</span>
                </label>
                <input type="number" id="fadeInDuration" min="0" max="10" step="0.5" value="0" 
                  style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
              </div>
              <div>
                <label for="fadeOutDuration" style="display: block; margin-bottom: 4px;">
                  <span>ğŸ“‰ Fade Out (seconds):</span>
                </label>
                <input type="number" id="fadeOutDuration" min="0" max="10" step="0.5" value="0" 
                  style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
              </div>
            </div>
          </div>

          <!-- Transitions (for split segments) -->
          <div class="setting-group" id="transitionSettings" style="display: none;">
            <h4>âœ¨ Transitions (Between Segments)</h4>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div>
                <label for="transitionType" style="display: block; margin-bottom: 4px;">
                  <span>Transition Type:</span>
                </label>
                <select id="transitionType" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
                  <option value="none">None</option>
                  <option value="fade">Fade</option>
                  <option value="fadeblack">Fade to Black</option>
                  <option value="fadewhite">Fade to White</option>
                  <option value="wipeleft">Wipe Left</option>
                  <option value="wiperight">Wipe Right</option>
                  <option value="wipeup">Wipe Up</option>
                  <option value="wipedown">Wipe Down</option>
                  <option value="slideleft">Slide Left</option>
                  <option value="slideright">Slide Right</option>
                </select>
              </div>
              <div>
                <label for="transitionDuration" style="display: block; margin-bottom: 4px;">
                  <span>Duration (seconds):</span>
                </label>
                <input type="number" id="transitionDuration" min="0.1" max="3" step="0.1" value="0.5" 
                  style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 4px;">
              </div>
            </div>
          </div>
        </div>

        <div style="margin-top: 15px;">
          <button id="exportTrimmedBtn" class="success">ğŸ’¾ Export Edited Video</button>
        </div>
      </div>

      <!-- Subtitle Generation -->
      <div class="section">
        <h3><span id="subtitleStepNumber">2</span>. Generate Subtitles</h3>
        
        <div style="margin-bottom: 15px;">
          <label for="languageSelect" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">
            ğŸŒ Transcription Language:
          </label>
          <select id="languageSelect" style="
            width: 100%;
            padding: 10px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 6px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
          ">
            <option value="auto">ğŸ”„ Auto-detect</option>
            <option value="en">ğŸ‡¬ğŸ‡§ English</option>
            <option value="tr">ğŸ‡¹ğŸ‡· Turkish (TÃ¼rkÃ§e)</option>
            <option value="es">ğŸ‡ªğŸ‡¸ Spanish (EspaÃ±ol)</option>
            <option value="fr">ğŸ‡«ğŸ‡· French (FranÃ§ais)</option>
            <option value="de">ğŸ‡©ğŸ‡ª German (Deutsch)</option>
            <option value="it">ğŸ‡®ğŸ‡¹ Italian (Italiano)</option>
            <option value="pt">ğŸ‡µğŸ‡¹ Portuguese (PortuguÃªs)</option>
            <option value="ru">ğŸ‡·ğŸ‡º Russian (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ Japanese (æ—¥æœ¬èª)</option>
            <option value="ko">ğŸ‡°ğŸ‡· Korean (í•œêµ­ì–´)</option>
            <option value="zh">ğŸ‡¨ğŸ‡³ Chinese (ä¸­æ–‡)</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
            <option value="hi">ğŸ‡®ğŸ‡³ Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
            <option value="nl">ğŸ‡³ğŸ‡± Dutch (Nederlands)</option>
            <option value="pl">ğŸ‡µğŸ‡± Polish (Polski)</option>
            <option value="sv">ğŸ‡¸ğŸ‡ª Swedish (Svenska)</option>
            <option value="da">ğŸ‡©ğŸ‡° Danish (Dansk)</option>
            <option value="no">ğŸ‡³ğŸ‡´ Norwegian (Norsk)</option>
            <option value="fi">ğŸ‡«ğŸ‡® Finnish (Suomi)</option>
            <option value="cs">ğŸ‡¨ğŸ‡¿ Czech (ÄŒeÅ¡tina)</option>
            <option value="uk">ğŸ‡ºğŸ‡¦ Ukrainian (Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°)</option>
            <option value="ro">ğŸ‡·ğŸ‡´ Romanian (RomÃ¢nÄƒ)</option>
            <option value="el">ğŸ‡¬ğŸ‡· Greek (Î•Î»Î»Î·Î½Î¹ÎºÎ¬)</option>
            <option value="hu">ğŸ‡­ğŸ‡º Hungarian (Magyar)</option>
            <option value="id">ğŸ‡®ğŸ‡© Indonesian (Bahasa Indonesia)</option>
            <option value="vi">ğŸ‡»ğŸ‡³ Vietnamese (Tiáº¿ng Viá»‡t)</option>
            <option value="th">ğŸ‡¹ğŸ‡­ Thai (à¹„à¸—à¸¢)</option>
            <option value="ms">ğŸ‡²ğŸ‡¾ Malay (Bahasa Melayu)</option>
          </select>
        </div>
        
        <button id="genBtn" disabled>âœ¨ Generate Subtitles (AI)</button>
        
        <div id="uploadProgress" class="progress-container">
          <div class="progress-bar">
            <div id="uploadFill" class="progress-fill" style="width: 0%">0%</div>
          </div>
          <div id="transcriptionStatus" class="status-text"></div>
        </div>

        <h3 style="margin-top: 20px;">ğŸ“ Subtitles</h3>
        
        <!-- View Mode Toggle -->
        <div style="margin-bottom: 15px; display: flex; gap: 10px;">
          <button id="simpleViewBtn" class="secondary active">ğŸ“„ Simple View</button>
          <button id="advancedViewBtn" class="secondary">âš™ï¸ Advanced Editor</button>
        </div>
        
        <!-- Simple SRT Text View -->
        <div id="simpleView">
          <textarea id="srtBox" placeholder="SRT subtitles will appear here after generation..." readonly></textarea>
          
          <div id="editControls" class="edit-controls">
            <button id="editBtn" class="secondary">âœï¸ Edit SRT</button>
            <button id="saveBtn" class="success hidden">ğŸ’¾ Save Changes</button>
            <button id="cancelBtn" class="secondary hidden">âŒ Cancel</button>
          </div>
        </div>
        
        <!-- Advanced Subtitle Editor -->
        <div id="advancedView" class="hidden">
          <div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
            <button id="addSubtitleBtn" class="secondary">â• Add Subtitle</button>
            <button id="shiftAllBtn" class="secondary">â° Shift All Timing</button>
            <button id="autoSyncBtn" class="secondary">ğŸ¯ Auto-Sync</button>
            <button id="aiEnhanceBtn" class="secondary">âœ¨ AI Enhance</button>
            <span style="color: #666; font-size: 14px;">Total: <span id="subtitleCount">0</span> subtitles</span>
          </div>
          
          <!-- Auto-Sync Panel -->
          <div id="autoSyncPanel" class="hidden" style="
            margin-bottom: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #2196F3 0%, #00BCD4 100%);
            border-radius: 8px;
            color: white;
          ">
            <h4 style="margin: 0 0 15px 0;">ğŸ¯ Auto-Sync Subtitle Timing</h4>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
              <div>
                <label style="display: block; margin-bottom: 8px; font-size: 13px;">ğŸ“ Sync Method:</label>
                <select id="syncMethod" style="width: 100%; padding: 8px; border-radius: 4px; border: none;">
                  <option value="offset">â° Simple Offset (Shift All)</option>
                  <option value="stretch">ğŸ“ Stretch/Compress Timing</option>
                  <option value="two-point">ğŸ¯ Two-Point Sync</option>
                </select>
              </div>
              
              <div id="offsetOptions">
                <label style="display: block; margin-bottom: 8px; font-size: 13px;">â±ï¸ Time Offset (seconds):</label>
                <input type="number" id="timeOffset" step="0.1" value="0" style="
                  width: 100%;
                  padding: 8px;
                  border-radius: 4px;
                  border: none;
                  font-size: 14px;
                " placeholder="e.g., 2.5 or -1.5">
              </div>
              
              <div id="stretchOptions" class="hidden">
                <label style="display: block; margin-bottom: 8px; font-size: 13px;">ğŸ“Š Speed Factor:</label>
                <input type="number" id="speedFactor" step="0.01" value="1.0" min="0.5" max="2.0" style="
                  width: 100%;
                  padding: 8px;
                  border-radius: 4px;
                  border: none;
                  font-size: 14px;
                " placeholder="1.0 = normal, >1 = faster, <1 = slower">
              </div>
              
              <div id="twoPointOptions" class="hidden" style="grid-column: 1 / -1;">
                <div style="background: rgba(255,255,255,0.15); padding: 12px; border-radius: 6px; margin-bottom: 10px;">
                  <p style="margin: 0 0 10px 0; font-size: 13px;">ğŸ“Œ Set two sync points:</p>
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div>
                      <label style="display: block; margin-bottom: 5px; font-size: 12px;">Point 1 - Subtitle #:</label>
                      <input type="number" id="syncPoint1Index" min="1" value="1" style="width: 100%; padding: 6px; border-radius: 4px; border: none;">
                    </div>
                    <div>
                      <label style="display: block; margin-bottom: 5px; font-size: 12px;">Should start at (sec):</label>
                      <input type="number" id="syncPoint1Time" step="0.1" value="0" style="width: 100%; padding: 6px; border-radius: 4px; border: none;">
                    </div>
                    <div>
                      <label style="display: block; margin-bottom: 5px; font-size: 12px;">Point 2 - Subtitle #:</label>
                      <input type="number" id="syncPoint2Index" min="1" value="10" style="width: 100%; padding: 6px; border-radius: 4px; border: none;">
                    </div>
                    <div>
                      <label style="display: block; margin-bottom: 5px; font-size: 12px;">Should start at (sec):</label>
                      <input type="number" id="syncPoint2Time" step="0.1" value="30" style="width: 100%; padding: 6px; border-radius: 4px; border: none;">
                    </div>
                  </div>
                  <small style="display: block; margin-top: 8px; opacity: 0.9; font-size: 11px;">
                    ğŸ’¡ Tip: Play video to find exact times where subtitles should appear
                  </small>
                </div>
              </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 6px; margin-bottom: 15px;">
              <p style="margin: 0; font-size: 12px; opacity: 0.95;">
                â„¹ï¸ <strong>Info:</strong> This will adjust all subtitle timings. You can undo by clicking "Reset" or reloading subtitles.
              </p>
            </div>
            
            <div style="display: flex; gap: 10px;">
              <button id="applyAutoSyncBtn" class="success" style="flex: 1;">ğŸ¯ Apply Sync</button>
              <button id="closeAutoSyncBtn" class="secondary">âŒ Close</button>
            </div>
          </div>
          
          <!-- AI Enhancement Panel -->
          <div id="aiPanel" class="hidden" style="
            margin-bottom: 15px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 8px;
            color: white;
          ">
            <h4 style="margin: 0 0 15px 0;">ğŸ¤– AI Subtitle Enhancement</h4>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ”‘ API Provider:</label>
                <select id="aiProvider" style="width: 100%; padding: 8px; border-radius: 4px; border: none;">
                  <option value="gemini">Google Gemini</option>
                  <option value="deepseek">DeepSeek</option>
                </select>
              </div>
              
              <div>
                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ¯ Operation:</label>
                <select id="aiOperation" style="width: 100%; padding: 8px; border-radius: 4px; border: none;">
                  <option value="improve">âœ¨ Improve Grammar & Style</option>
                  <option value="translate">ğŸŒ Translate to...</option>
                  <option value="summarize">ğŸ“ Summarize (Shorter)</option>
                  <option value="formal">ğŸ‘” Make More Formal</option>
                  <option value="casual">ğŸ˜Š Make More Casual</option>
                  <option value="punctuation">ğŸ“Œ Fix Punctuation</option>
                </select>
              </div>
            </div>
            
            <div id="translateOptions" class="hidden" style="margin-bottom: 15px;">
              <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸŒ Target Language:</label>
              <select id="targetLanguage" style="width: 100%; padding: 8px; border-radius: 4px; border: none;">
                <option value="en">English</option>
                <option value="tr">Turkish (TÃ¼rkÃ§e)</option>
                <option value="es">Spanish (EspaÃ±ol)</option>
                <option value="fr">French (FranÃ§ais)</option>
                <option value="de">German (Deutsch)</option>
                <option value="ja">Japanese (æ—¥æœ¬èª)</option>
                <option value="ko">Korean (í•œêµ­ì–´)</option>
                <option value="zh">Chinese (ä¸­æ–‡)</option>
                <option value="ar">Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                <option value="ru">Russian (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
              </select>
            </div>
            
            <div style="margin-bottom: 15px;">
              <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ” API Key:</label>
              <input type="password" id="aiApiKey" placeholder="Enter your API key..." style="
                width: 100%;
                padding: 8px;
                border-radius: 4px;
                border: none;
                font-family: monospace;
              ">
              <small style="opacity: 0.9; font-size: 11px;">Your API key is stored locally and never sent to our servers</small>
            </div>
            
            <div style="display: flex; gap: 10px;">
              <button id="processAiBtn" class="success" style="flex: 1;">ğŸš€ Process with AI</button>
              <button id="closeAiBtn" class="secondary">âŒ Close</button>
            </div>
            
            <div id="aiProgress" class="hidden" style="margin-top: 15px;">
              <div style="background: rgba(255,255,255,0.2); height: 6px; border-radius: 3px; overflow: hidden;">
                <div id="aiProgressBar" style="background: white; height: 100%; width: 0%; transition: width 0.3s;"></div>
              </div>
              <p id="aiStatus" style="margin: 8px 0 0 0; font-size: 13px; text-align: center;"></p>
            </div>
          </div>
          
          <div id="subtitleList" style="
            max-height: 500px;
            overflow-y: auto;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
          ">
            <p style="text-align: center; color: #999;">No subtitles yet</p>
          </div>
        </div>

        <!-- Subtitle Styling Options -->
        <h3 style="margin-top: 25px;">ğŸ¨ Subtitle Styling (Optional)</h3>
        <div id="stylingControls" style="
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
          padding: 15px;
          background: #f8f9fa;
          border-radius: 8px;
          margin-bottom: 15px;
        ">
          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">
              ğŸ”¤ Font Family:
            </label>
            <select id="fontFamily" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 6px; background: white;">
              <option value="Arial">Arial</option>
              <option value="Helvetica">Helvetica</option>
              <option value="Times New Roman">Times New Roman</option>
              <option value="Courier New">Courier New</option>
              <option value="Verdana">Verdana</option>
              <option value="Georgia">Georgia</option>
              <option value="Comic Sans MS">Comic Sans MS</option>
              <option value="Impact">Impact</option>
              <option value="Trebuchet MS">Trebuchet MS</option>
            </select>
          </div>

          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">
              ğŸ“ Font Size:
            </label>
            <select id="fontSize" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 6px; background: white;">
              <option value="16">Small (16pt)</option>
              <option value="20">Medium (20pt)</option>
              <option value="24" selected>Default (24pt)</option>
              <option value="28">Large (28pt)</option>
              <option value="32">Extra Large (32pt)</option>
              <option value="40">Huge (40pt)</option>
            </select>
          </div>

          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">
              ğŸ¨ Text Color:
            </label>
            <div style="display: flex; gap: 8px; align-items: center;">
              <input type="color" id="textColor" value="#ffffff" style="width: 50px; height: 38px; border: 2px solid #ddd; border-radius: 6px; cursor: pointer;">
              <span id="textColorValue" style="font-family: monospace; font-size: 14px;">#FFFFFF</span>
            </div>
          </div>

          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">
              ğŸ–¼ï¸ Outline Color:
            </label>
            <div style="display: flex; gap: 8px; align-items: center;">
              <input type="color" id="outlineColor" value="#000000" style="width: 50px; height: 38px; border: 2px solid #ddd; border-radius: 6px; cursor: pointer;">
              <span id="outlineColorValue" style="font-family: monospace; font-size: 14px;">#000000</span>
            </div>
          </div>

          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">
              ğŸ“ Position:
            </label>
            <select id="subtitlePosition" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 6px; background: white;">
              <option value="bottom">Bottom (Default)</option>
              <option value="top">Top</option>
              <option value="middle">Middle</option>
            </select>
          </div>

          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #333;">
              ğŸ’ª Font Weight:
            </label>
            <select id="fontWeight" style="width: 100%; padding: 8px; border: 2px solid #ddd; border-radius: 6px; background: white;">
              <option value="normal">Normal</option>
              <option value="bold" selected>Bold</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Export Options -->
      <div class="section">
        <h3><span id="exportStepNumber">3</span>. Export Options</h3>
        <div class="button-group">
          <button id="exportSrtBtn" disabled class="secondary">ğŸ“„ Export SRT File (Soft Subtitle)</button>
          <button id="burnBtn" disabled class="success">ğŸ”¥ Burn Subtitles into Video</button>
        </div>

        <div id="burnProgress" class="progress-container">
          <div class="progress-bar">
            <div id="burnFill" class="progress-fill" style="width: 0%">Processing...</div>
          </div>
          <div id="burnStatus" class="status-text"></div>
        </div>
      </div>
    </div>

    <!-- Timeline Thumbnail Preview -->
    <div id="timelineThumbnail" class="timeline-thumbnail">
      <canvas id="thumbnailCanvas" class="thumbnail-canvas" width="160" height="90"></canvas>
      <div id="thumbnailTime" class="thumbnail-time">00:00</div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
